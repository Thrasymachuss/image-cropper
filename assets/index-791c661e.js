(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function L(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=L(t);fetch(t.href,e)}})();const O=async(x,s,L,n)=>{const t=await new Promise(d=>{const l=new Image;l.addEventListener("load",()=>d(l)),l.src=x}),e=document.createElement("canvas"),i=e.getContext("2d");if(!i)return null;e.width=t.width,e.height=t.height,i.drawImage(t,0,0);const p=i.getImageData(0,0,e.width,e.height),a=document.createElement("canvas"),y=a.getContext("2d");if(!y)return null;const S=Number.isInteger(n),q=Math.trunc(e.width/2),C=Math.trunc(e.height/2),f=q+s+(S?.5:0),m=C+L+(S?.5:0);a.width=a.height=n*2;const r=y.createImageData(a.width,a.height),w=m-n<0?Math.trunc(n-m):0,g=m+n>e.height?m+n-e.height:0,u=f-n<0?Math.trunc(n-f):0,v=f+n>e.width?f+n-e.width:0;let o=0;for(let d=0;d<w;d++)for(let l=0;l<a.width;l++){for(let c=0;c<4;c++)r.data[o+c]=0;o+=4}for(let d=0;d<e.height;d++){const l=Math.abs(m-d);if(!(l>n)){for(let c=0;c<u;c++){for(let h=0;h<4;h++)r.data[o+h]=0;o+=4}for(let c=0;c<e.width;c++){const h=Math.abs(f-c);if(h>n)continue;const E=(d*e.width+c)*4;if(Math.sqrt(h**2+l**2)<=n)for(let I=0;I<4;I++)r.data[o+I]=p.data[E+I];else for(let I=0;I<4;I++)r.data[o+I]=0;o+=4}for(let c=0;c<v;c++){for(let h=0;h<4;h++)r.data[o+h]=0;o+=4}}}for(let d=0;d<g;d++)for(let l=0;l<a.width;l++){for(let c=0;c<4;c++)r.data[o+c]=0;o+=4}return y.putImageData(r,0,0),a.toDataURL()};(()=>{let x="",s="",L="";const n=document.querySelector("#input-img"),t=document.querySelector("#current-img"),e=document.querySelector("#crop-controls");if(!n||!t||!e)return;const i=document.querySelector("#original-width"),p=document.querySelector("#original-height"),a=document.querySelector("#width"),y=document.querySelector("#height");n.addEventListener("change",()=>{const r=n.files?n.files[0]:null;if(!r){e.classList.add("hidden"),t.classList.add("hidden"),i==null||i.classList.add("hidden"),p==null||p.classList.add("hidden");return}L=r.name;const w=new FileReader;w.addEventListener("load",g=>{var v;const u=(v=g.target)==null?void 0:v.result;if(!(!u||typeof u!="string")&&(t.src=s=x=u,s)){if(e.classList.remove("hidden"),t.classList.remove("hidden"),!i||!p)return;const o=new Image;o.addEventListener("load",()=>{i.textContent=`Original Width: ${o.width}`,p.textContent=`Original Height: ${o.height}`,i.classList.remove("hidden"),p.classList.remove("hidden"),!(!a||!y)&&(a.textContent=`Width: ${o.width}`,y.textContent=`Height: ${o.height}`)}),o.src=s}}),w.readAsDataURL(r)});const S=document.querySelector("#x-offset"),q=document.querySelector("#y-offset"),C=document.querySelector("#radius"),f=document.querySelector("#crop"),m=document.querySelector("#download");!S||!q||!C||(f==null||f.addEventListener("click",async()=>{const r=S.valueAsNumber,w=q.valueAsNumber,g=C.valueAsNumber;for(const v of[r,w,g])if(Number.isNaN(v)||v%.5)return;if(g<=0)return;t.src=s=await O(x,r,w,g)??"";const u=new Image;u.addEventListener("load",()=>{!a||!y||(a.textContent=`Width: ${u.width}`,y.textContent=`Height: ${u.height}`)}),u.src=s}),m==null||m.addEventListener("click",()=>{if(!s)return;const r=document.createElement("a");r.href=s;const g=L.substring(0,L.lastIndexOf("."))||"image";r.download=`${g}-cropped.png`,document.body.appendChild(r),r.click()}))})();
