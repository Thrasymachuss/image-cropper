(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function g(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=g(t);fetch(t.href,e)}})();const O=async(x,i,g,n)=>{const t=await new Promise(d=>{const l=new Image;l.addEventListener("load",()=>d(l)),l.src=x}),e=document.createElement("canvas"),c=e.getContext("2d");if(!c)return null;e.width=t.width,e.height=t.height,c.drawImage(t,0,0);const L=c.getImageData(0,0,e.width,e.height),s=document.createElement("canvas"),v=s.getContext("2d");if(!v)return null;const S=Number.isInteger(n),C=Math.trunc(e.width/2),q=Math.trunc(e.height/2),m=C+i+(S?.5:0),o=q+g+(S?.5:0);s.width=s.height=n*2;const a=v.createImageData(s.width,s.height),w=o-n<0?Math.trunc(n-o):0,h=o+n>e.height?o+n-e.height:0,I=m-n<0?Math.trunc(n-m):0,p=m+n>e.width?m+n-e.width:0;let u=0;for(let d=0;d<w;d++)for(let l=0;l<s.width;l++){for(let r=0;r<4;r++)a.data[u+r]=0;u+=4}for(let d=0;d<e.height;d++){const l=Math.abs(o-d);if(!(l>n)){for(let r=0;r<I;r++){for(let f=0;f<4;f++)a.data[u+f]=0;u+=4}for(let r=0;r<e.width;r++){const f=Math.abs(m-r);if(f>n)continue;const E=(d*e.width+r)*4;if(Math.sqrt(f**2+l**2)<=n)for(let y=0;y<4;y++)a.data[u+y]=L.data[E+y];else for(let y=0;y<4;y++)a.data[u+y]=0;u+=4}for(let r=0;r<p;r++){for(let f=0;f<4;f++)a.data[u+f]=0;u+=4}}}for(let d=0;d<h;d++)for(let l=0;l<s.width;l++){for(let r=0;r<4;r++)a.data[u+r]=0;u+=4}return v.putImageData(a,0,0),s.toDataURL()};(()=>{let x="",i="";const g=document.querySelector("#input-img"),n=document.querySelector("#current-img"),t=document.querySelector("#crop-controls");if(!g||!n||!t)return;const e=document.querySelector("#original-width"),c=document.querySelector("#original-height"),L=document.querySelector("#width"),s=document.querySelector("#height");g.addEventListener("change",()=>{const o=g.files?g.files[0]:null;if(!o){t.classList.add("hidden"),n.classList.add("hidden"),e==null||e.classList.add("hidden"),c==null||c.classList.add("hidden");return}const a=new FileReader;a.addEventListener("load",w=>{var I;const h=(I=w.target)==null?void 0:I.result;if(!(!h||typeof h!="string")&&(n.src=i=x=h,i)){if(t.classList.remove("hidden"),n.classList.remove("hidden"),!e||!c)return;const p=new Image;p.addEventListener("load",()=>{e.textContent=`Original Width: ${p.width}`,c.textContent=`Original Height: ${p.height}`,e.classList.remove("hidden"),c.classList.remove("hidden"),!(!L||!s)&&(L.textContent=`Width: ${p.width}`,s.textContent=`Height: ${p.height}`)}),p.src=i}}),a.readAsDataURL(o)});const v=document.querySelector("#x-offset"),S=document.querySelector("#y-offset"),C=document.querySelector("#radius"),q=document.querySelector("#crop"),m=document.querySelector("#download");!v||!S||!C||(q==null||q.addEventListener("click",async()=>{const o=v.valueAsNumber,a=S.valueAsNumber,w=C.valueAsNumber;for(const I of[o,a,w])if(Number.isNaN(I)||I%.5)return;if(w<=0)return;n.src=i=await O(x,o,a,w)??"";const h=new Image;h.addEventListener("load",()=>{!L||!s||(L.textContent=`Width: ${h.width}`,s.textContent=`Height: ${h.height}`)}),h.src=i}),m==null||m.addEventListener("click",()=>{if(!i)return;const o=document.createElement("a");o.href=i,o.download="cropped-image.png",document.body.appendChild(o),o.click()}))})();
